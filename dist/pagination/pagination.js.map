{"version":3,"sources":["../../src/pagination/pagination.ts"],"names":[],"mappings":"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","file":"pagination.js","sourceRoot":"","sourcesContent":["import { Component, Input, Inject, PLATFORM_ID } from \"@angular/core\";\nimport { connectPagination } from \"instantsearch.js/es/connectors\";\nimport { noop, range } from \"lodash-es\";\n\nimport { BaseWidget } from \"../base-widget\";\nimport { NgAisInstance } from \"../instantsearch/instantsearch-instance\";\nimport { parseNumberInput } from \"../utils\";\n\n\nexport class NgAisPagination extends BaseWidget {\n  // render options\n   public showFirst: boolean = true;\n   public showLast: boolean = false;\n   public showPrevious: boolean = true;\n   public showNext: boolean = true;\n   public pagesPadding: number | string = 3;\n\n  // connector optionsw\n   public maxPages?: number | string;\n\n  public state = {\n    createURL: noop,\n    currentRefinement: 0,\n    nbHits: 0,\n    nbPages: 0,\n    refine: noop\n  };\n\n  get pages() {\n    const { nbPages, currentRefinement } = this.state;\n\n    const pagesArray = Array.apply(null, { length: nbPages }).map(\n      Number.call,\n      Number\n    );\n\n    const pagesPadding =\n      typeof this.pagesPadding === \"string\"\n        ? parseInt(this.pagesPadding, 10)\n        : this.pagesPadding;\n\n    if (pagesPadding && pagesPadding > 0) {\n      // should not display pages that does not exists\n      if (nbPages < pagesPadding * 2 + 1) {\n        return pagesArray;\n      }\n\n      const minDelta = currentRefinement - pagesPadding - 1;\n      const maxDelta = currentRefinement + pagesPadding + 1;\n\n      if (minDelta < 0) {\n        return range(0, currentRefinement + pagesPadding + Math.abs(minDelta));\n      }\n\n      if (maxDelta > nbPages) {\n        return range(\n          currentRefinement - pagesPadding - (maxDelta - nbPages),\n          nbPages\n        );\n      }\n\n      return range(\n        currentRefinement - pagesPadding,\n        currentRefinement + pagesPadding + 1\n      );\n    }\n\n    return pagesArray;\n  }\n\n  constructor(\n     public platformId: Object,\n    searchInstance: NgAisInstance\n  ) {\n    super(searchInstance, \"Pagination\");\n  }\n\n  public ngOnInit() {\n    this.createWidget(connectPagination, {\n      maxPages: parseNumberInput(this.maxPages)\n    });\n    super.ngOnInit();\n  }\n\n  public refine(event: MouseEvent, page: number) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (page <= this.state.nbPages && page >= 0) {\n      this.state.refine(page);\n    }\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: \"ng-ais-pagination\",\n  template: `\n    <div [class]=\"cx()\">\n      <ng-ais-header [header]=\"header\" [className]=\"cx('header')\"></ng-ais-header>\n\n      <div [class]=\"cx('body')\">\n        <ul [class]=\"cx('list')\">\n          <li\n            *ngIf=\"showFirst\"\n            (click)=\"refine($event, 0)\"\n            [class]=\"\n              cx('item', 'firstPage') +\n              (state.currentRefinement === 0 ? ' ' + cx('item', 'disabled') : '')\n            \"\n          >\n            <a\n              [href]=\"state.createURL(0)\"\n              [class]=\"cx('link')\"\n            >\n              «\n            </a>\n          </li>\n\n          <li\n            *ngIf=\"showPrevious\"\n            (click)=\"refine($event, state.currentRefinement - 1)\"\n            [class]=\"\n              cx('item', 'previousPage') +\n              (state.currentRefinement === 0 ? ' ' + cx('item', 'disabled') : '')\n            \"\n          >\n            <a\n              [href]=\"state.createURL(state.currentRefinement - 1)\"\n              [class]=\"cx('link')\"\n            >\n              ‹\n            </a>\n          </li>\n\n          <li\n            [class]=\"\n              cx('item', 'page') +\n              (state.currentRefinement === page ? ' ' + cx('item', 'selected') : '')\n            \"\n            *ngFor=\"let page of pages\"\n            (click)=\"refine($event, page)\"\n          >\n            <a\n              [class]=\"cx('link')\"\n              [href]=\"state.createURL(page)\"\n            >\n              {{page + 1}}\n            </a>\n          </li>\n\n          <li\n            *ngIf=\"showNext\"\n            (click)=\"refine($event, state.currentRefinement + 1)\"\n            [class]=\"\n              cx('item', 'nextPage') +\n              (state.currentRefinement + 1 === state.nbPages ? ' ' + cx('item', 'disabled') : '')\n            \"\n          >\n            <a\n              [href]=\"state.createURL(state.currentRefinement + 1)\"\n              [class]=\"cx('link')\"\n            >\n              ›\n            </a>\n          </li>\n\n          <li\n            *ngIf=\"showLast\"\n            (click)=\"refine($event, state.nbPages)\"\n            [class]=\"\n              cx('item', 'lastPage') +\n              (state.currentRefinement + 1 === state.nbPages ? ' ' + cx('item', 'disabled') : '')\n            \"\n          >\n            <a\n              [href]=\"state.createURL(state.nbPages)\"\n              [class]=\"cx('link')\"\n            >\n              »\n            </a>\n          </li>\n        </ul>\n      </div>\n\n      <ng-ais-footer [footer]=\"footer\" [className]=\"cx('footer')\"></ng-ais-footer>\n    </div>\n  `\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: Object, decorators: [{ type: Inject, args: [PLATFORM_ID, ] }, ]},\n{type: NgAisInstance, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'showFirst': [{ type: Input },],\n'showLast': [{ type: Input },],\n'showPrevious': [{ type: Input },],\n'showNext': [{ type: Input },],\n'pagesPadding': [{ type: Input },],\n'maxPages': [{ type: Input },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}